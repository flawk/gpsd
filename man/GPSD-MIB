GPSD-MIB DEFINITIONS ::= BEGIN

-- Run "smilint GPSD_MIB" to validate this MIB
--
-- By default this file is installed as:
--     /usr/local/share/snmp/mibs/gpsd/GPSD-MIB
-- For net-snmp to find the file, add the following line to /etc/snmp/snmp.conf
--   mibfile /usr/local/share/snmp/mibs/gpsd/GPSD-MIB

IMPORTS
    MODULE-IDENTITY, OBJECT-TYPE, enterprises FROM SNMPv2-SMI
    DisplayString, TimeStamp
        FROM SNMPv2-TC
;

gpsd MODULE-IDENTITY
     LAST-UPDATED "202207061600Z"
     ORGANIZATION "The Gpsd Project"
     CONTACT-INFO
        "The Gpsd Project
        https://gpsd.io
        EMail: gpsd-users@gpsd.io"

     DESCRIPTION
        "This MIB contains definition of the OIDs
        used by gpssnmp part of the gpsd project.

        This file is Copyright 2022 by the GPSD project
        SPDX-License-Identifier: BSD-2-clause"

     REVISION
        "202207061600Z"

     DESCRIPTION
        "DRAFT: Initial MIB."

     ::= { enterprises 59054 }

-- groups in GPSD
-- These correspond to the gpsd JSON message classes
-- See the gpsd doc (man gpsd_json) for detailed explanation of each.
-- Few implemented implemented so far.
-- All are read-only

ais       OBJECT IDENTIFIER ::= { gpsd 1 }

att       OBJECT IDENTIFIER ::= { gpsd 2 }

devices   OBJECT IDENTIFIER ::= { gpsd 3 }

gst       OBJECT IDENTIFIER ::= { gpsd 4 }

imu       OBJECT IDENTIFIER ::= { gpsd 5 }

log       OBJECT IDENTIFIER ::= { gpsd 6 }

osc       OBJECT IDENTIFIER ::= { gpsd 7 }

raw       OBJECT IDENTIFIER ::= { gpsd 8 }

rtcm2     OBJECT IDENTIFIER ::= { gpsd 9 }

rtcm3     OBJECT IDENTIFIER ::= { gpsd 10 }

sky       OBJECT IDENTIFIER ::= { gpsd 11 }

subframe  OBJECT IDENTIFIER ::= { gpsd 12 }

tpv       OBJECT IDENTIFIER ::= { gpsd 13 }

version   OBJECT IDENTIFIER ::= { gpsd 14 }

watch     OBJECT IDENTIFIER ::= { gpsd 15 }

-- devices

devNumber  OBJECT-TYPE
    SYNTAX      INTEGER
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
            "The number of devices currently attached to gpsd, regardless
            of current state."
    ::= { devices 1 }

-- the Devices table

-- The Devices table contains information on on each connected device

devTable OBJECT-TYPE
    SYNTAX      SEQUENCE OF DevEntry
    MAX-ACCESS  not-accessible
    STATUS      current
    DESCRIPTION
            "A list of device entries.  The number of entries is
            given by the value of devNumber."
    ::= { devices 2 }

devEntry OBJECT-TYPE
    SYNTAX      DevEntry
    MAX-ACCESS  not-accessible
    STATUS      current
    DESCRIPTION
            "An entry containing information applicable to a
            particular device."
    INDEX   { devIndex }
    ::= { devTable 1 }


DevEntry ::=
      SEQUENCE {
        devIndex                 INTEGER,
        devPath                  DisplayString
      }

devIndex OBJECT-TYPE
    SYNTAX      INTEGER (0..255)
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
            "A unique value, greater than zero, for each device."
    ::= { devEntry 1 }

devPath OBJECT-TYPE
    SYNTAX      DisplayString (SIZE (0..255))
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
            "The device path."
    ::= { devEntry 2 }

-- tpv - Stuff from the TPV JSON class

tpvNumber  OBJECT-TYPE
    SYNTAX      INTEGER
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
            "The number of devices in tpvTable, regardless of current state."
    ::= { tpv 1 }

-- the TPV table

-- The TPV table contains the TPV data from each connected device
-- See 'man gpsd_json' for more information on each variable

tpvTable OBJECT-TYPE
    SYNTAX      SEQUENCE OF TpvEntry
    MAX-ACCESS  not-accessible
    STATUS      current
    DESCRIPTION
            "A list of device entries.  The number of entries is
            given by the value of tpvNumber."
    ::= { tpv 2 }

tpvEntry OBJECT-TYPE
    SYNTAX      TpvEntry
    MAX-ACCESS  not-accessible
    STATUS      current
    DESCRIPTION
            "An entry containing information applicable to a
            particular device."
    INDEX   { tpvIndex }
    ::= { tpvTable 1 }


TpvEntry ::=
      SEQUENCE {
        tpvIndex             INTEGER,
        tpvPath              DisplayString,
        tpvMode              INTEGER,
        tpvLatitude          INTEGER,
        tpvLongitude         INTEGER,
        tpvAltHAE            INTEGER,
        tpvAltMSL            INTEGER
      }

tpvIndex OBJECT-TYPE
    SYNTAX      INTEGER (0..255)
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
            "A unique value, greater than zero, for each device."
    ::= { tpvEntry 1 }

tpvPath OBJECT-TYPE
    SYNTAX      DisplayString (SIZE (0..255))
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
            "The device path."
    ::= { tpvEntry 2 }

tpvMode OBJECT-TYPE
    SYNTAX      INTEGER (0..15)
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
            "NMEA mode: 0=unknown, 1=no fix, 2=2D, 3=3D."
    ::= { tpvEntry 3 }

tpvLatitude OBJECT-TYPE
    SYNTAX      INTEGER
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
            "The device Latitude in degrees. Times 1e5"
    ::= { tpvEntry 4 }

tpvLongitude OBJECT-TYPE
    SYNTAX      INTEGER
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
            "The device Longitude in degrees. Times 1e5"
    ::= { tpvEntry 5 }

tpvAltHAE OBJECT-TYPE
    SYNTAX      INTEGER
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
            "The device altitude above the(maybe WGS84) ellipsoid in meters.
             Times 1e4."
    ::= { tpvEntry 6 }

tpvAltMSL OBJECT-TYPE
    SYNTAX      INTEGER
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
            "The device altitude MSL in meters. Time 1e4."
    ::= { tpvEntry 7 }

-- sky - Stuff from the SKY JSON class

skyNumber  OBJECT-TYPE
    SYNTAX      INTEGER
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
            "The number of devices in skyTable, regardless of current state."
    ::= { sky 1 }

-- the SKY table

-- The SKY table contains the SKY JSON data from each connected device
-- See 'man gpsd_json' for more information on each variable

skyTable OBJECT-TYPE
    SYNTAX      SEQUENCE OF SkyEntry
    MAX-ACCESS  not-accessible
    STATUS      current
    DESCRIPTION
            "A list of device entries.  The number of entries is
            given by the value of skyNumber."
    ::= { sky 2 }

skyEntry OBJECT-TYPE
    SYNTAX      SkyEntry
    MAX-ACCESS  not-accessible
    STATUS      current
    DESCRIPTION
            "An entry containing information applicable to a
            particular device."
    INDEX   { skyIndex }
    ::= { skyTable 1 }


SkyEntry ::=
      SEQUENCE {
        skyIndex             INTEGER,
        skyPath              DisplayString,
        skynSat              INTEGER,       -- aka "seen"
        skyuSat              INTEGER,       -- used
        skySNRavg            INTEGER        -- average SNR
      }

skyIndex OBJECT-TYPE
    SYNTAX      INTEGER (0..255)
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
            "A unique value, greater than zero, for each device."
    ::= { skyEntry 1 }

skyPath OBJECT-TYPE
    SYNTAX      DisplayString (SIZE (0..255))
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
            "The device path."
    ::= { skyEntry 2 }

skynSat OBJECT-TYPE
    SYNTAX      INTEGER
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
            "number of sats seen by this device"
    ::= { skyEntry 3 }

skyuSat OBJECT-TYPE
    SYNTAX      INTEGER
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
            "number of sats used by this device"
    ::= { skyEntry 4 }

skySNRavg OBJECT-TYPE
    SYNTAX      INTEGER
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
            "average SNR or all satellites in use, times 100."
    ::= { skyEntry 5 }


END
